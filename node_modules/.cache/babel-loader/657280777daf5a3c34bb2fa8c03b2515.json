{"ast":null,"code":"import VueApexCharts from \"vue-apexcharts\";\nimport moment from 'moment';\nimport 'moment/locale/es';\nexport default {\n  components: {\n    apexchart: VueApexCharts\n  },\n  props: ['parentData'],\n  data: () => ({\n    dataGraph: [],\n    chartOptions: {\n      chart: {\n        type: 'bar',\n        height: 350\n      },\n      plotOptions: {\n        bar: {\n          horizontal: false,\n          columnWidth: '55%',\n          endingShape: 'rounded'\n        }\n      },\n      dataLabels: {\n        enabled: false\n      },\n      stroke: {\n        show: true,\n        width: 2,\n        colors: ['transparent']\n      },\n      xaxis: {\n        categories: moment.months()\n      },\n      yaxis: {\n        title: {\n          text: '$( Ganancias )'\n        },\n        max: 32.000,\n        labels: {\n          formatter: value => {\n            return \"$ \" + value;\n          }\n        }\n      },\n      fill: {\n        opacity: 1\n      },\n      tooltip: {\n        y: {\n          formatter: function (val) {\n            return \"$ \" + val;\n            /*+ \"thousands\"*/\n          }\n        }\n      }\n    }\n  }),\n  watch: {\n    parentData() {\n      if (this.parentData.length > 0) {\n        this.netEarnings();\n      } else {\n        this.dataGraph = [];\n        this.$emit(\"resetComponentValue\", '');\n      }\n    }\n\n  },\n\n  created() {\n    this.netEarnings();\n  },\n\n  methods: {\n    async netEarnings() {\n      const itemConsultants = this.parentData.map(v => {\n        return v.co_usuario;\n      });\n      const request = {\n        item_consultants: itemConsultants\n      };\n\n      try {\n        const response = await this.$store.dispatch(\"consultant/CONSULTANT_NET_EARNINGS\", request); //response service\n\n        const dataConsultan = response.data;\n        const listSelect = this.parentData;\n        const organizedData = dataConsultan.reduce(function (acumulador, valorActual) {\n          const name = listSelect.find(consultant => {\n            return consultant.co_usuario === valorActual.co_usuario;\n          });\n          let valorActualAssignName = Object.assign({\n            name: name.no_usuario\n          }, valorActual);\n          acumulador[valorActual.co_usuario] = acumulador[valorActualAssignName.co_usuario] || [];\n          acumulador[valorActual.co_usuario].push(valorActualAssignName);\n          return acumulador;\n        }, Object.create(null));\n        let ObjectBar = [];\n\n        for (let key in organizedData) {\n          let earningsData = [];\n          moment.months().map(month => {\n            let busqueda = organizedData[key].find(index => {\n              return month == moment(index.month).format('MMMM');\n            });\n\n            if (busqueda != undefined) {\n              earningsData.push(this.numFormat(busqueda.total_net_earnings));\n            } else {\n              earningsData.push(0);\n            }\n          });\n          let dataPrepare = {\n            name: organizedData[key][0].name,\n            data: earningsData\n          };\n          ObjectBar.push(dataPrepare);\n        }\n\n        this.dataGraph = ObjectBar;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    numFormat(item) {\n      return new Intl.NumberFormat('de-DE').format(item.toFixed(2));\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAuBA;AACA;AACA;AAEA;EACAA;IACAC;EADA,CADA;EAIAC,qBAJA;EAKAC;IACAC,aADA;IAEAC;MACAC;QACAC,WADA;QAEAC;MAFA,CADA;MAKAC;QACAC;UACAC,iBADA;UAEAC,kBAFA;UAGAC;QAHA;MADA,CALA;MAYAC;QACAC;MADA,CAZA;MAeAC;QACAC,UADA;QAEAC,QAFA;QAGAC;MAHA,CAfA;MAoBAC;QACAC;MADA,CApBA;MAuBAC;QACAC;UACAC;QADA,CADA;QAIAC,WAJA;QAKAC;UACAC;YAAA;UAAA;QADA;MALA,CAvBA;MAgCAC;QACAC;MADA,CAhCA;MAmCAC;QACAC;UACAJ;YACA;YAAA;UACA;QAHA;MADA;IAnCA;EAFA,EALA;EAmDAK;IACAC;MACA;QACA;MACA,CAFA,MAGA;QACA;QACA;MACA;IACA;;EATA,CAnDA;;EA8DAC;IACA;EACA,CAhEA;;EAiEAC;IACA;MACA;QACA;MACA,CAFA;MAGA;QACAC;MADA;;MAGA;QACA,2FADA,CACA;;QAEA;QAEA;QAEA,8EACA;UACA;YACA;UACA,CAFA;UAIA;YAAAC;UAAA;UAEAC;UACAA;UAEA;QAEA,CAbA,EAaAC,mBAbA;QAcA;;QACA,+BACA;UACA;UAEAC;YAEA;cACA;YACA,CAFA;;YAIA;cACAC;YACA,CAFA,MAGA;cACAA;YACA;UAEA,CAbA;UAeA;YACAJ,gCADA;YAEAlC;UAFA;UAIAuC;QACA;;QAEA;MACA,CAjDA,CAiDA;QACAC;MACA;IACA,CA5DA;;IA6DAC;MACA;IACA;;EA/DA;AAjEA","names":["components","apexchart","props","data","dataGraph","chartOptions","chart","type","height","plotOptions","bar","horizontal","columnWidth","endingShape","dataLabels","enabled","stroke","show","width","colors","xaxis","categories","yaxis","title","text","max","labels","formatter","fill","opacity","tooltip","y","watch","parentData","created","methods","item_consultants","name","acumulador","Object","moment","earningsData","ObjectBar","console","numFormat"],"sourceRoot":"src/components","sources":["GraphBar.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <!-- <v-card\r\n        elevation=\"6\"\r\n        loading\r\n        outlined\r\n        max-width=\"900\"\r\n        class=\"pt-3 mx-auto\"\r\n      > -->\r\n        <apexchart \r\n          type=\"bar\"\r\n          height=\"350\" \r\n          :options=\"chartOptions\" \r\n          :series=\"dataGraph\"\r\n          class=\"pt-3 mx-auto\"\r\n        >\r\n        </apexchart>\r\n      <!-- </v-card> -->\r\n    \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport VueApexCharts from \"vue-apexcharts\";\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\n\r\nexport default {\r\n  components: {\r\n    apexchart: VueApexCharts\r\n  },\r\n  props: ['parentData'],\r\n  data: () => ({\r\n    dataGraph : [],\r\n    chartOptions: {\r\n      chart: {\r\n        type: 'bar',\r\n        height: 350\r\n      },\r\n      plotOptions: {\r\n        bar: {\r\n          horizontal: false,\r\n          columnWidth: '55%',\r\n          endingShape: 'rounded'\r\n        },\r\n      },\r\n      dataLabels: {\r\n        enabled: false\r\n      },\r\n      stroke: {\r\n        show: true,\r\n        width: 2,\r\n        colors: ['transparent']\r\n      },\r\n      xaxis: {\r\n        categories: moment.months(),\r\n      },\r\n      yaxis: {\r\n        title: {\r\n          text: '$( Ganancias )'\r\n        },\r\n        max: 32.000,\r\n        labels:{\r\n          formatter: (value) => { return \"$ \" + value   },\r\n        }\r\n      },\r\n      fill: {\r\n        opacity: 1\r\n      },\r\n      tooltip: {\r\n        y: {\r\n          formatter: function (val) {\r\n            return \"$ \" + val /*+ \"thousands\"*/\r\n          }\r\n        }\r\n      }\r\n    }, \r\n }),\r\n watch:{\r\n  parentData(){\r\n    if(this.parentData.length > 0) {\r\n      this.netEarnings()\r\n    }\r\n    else{\r\n      this.dataGraph = []\r\n      this.$emit(\"resetComponentValue\", '');\r\n    }\r\n  }\r\n},\r\ncreated() {\r\n  this.netEarnings()\r\n},\r\n methods: {\r\n  async netEarnings(){\r\n      const itemConsultants = this.parentData.map((v) => {\r\n          return v.co_usuario\r\n      });\r\n      const request = {\r\n        item_consultants: itemConsultants\r\n      };\r\n      try {\r\n        const response = await this.$store.dispatch(\"consultant/CONSULTANT_NET_EARNINGS\", request);//response service\r\n        \r\n        const dataConsultan = response.data;\r\n\r\n        const listSelect = this.parentData\r\n\r\n        const organizedData = dataConsultan.reduce(function (acumulador, valorActual)\r\n        {\r\n          const name = listSelect.find((consultant) => { \r\n            return consultant.co_usuario === valorActual.co_usuario\r\n          });\r\n\r\n          let valorActualAssignName = Object.assign({name:name.no_usuario}, valorActual)\r\n\r\n          acumulador[valorActual.co_usuario] = acumulador[valorActualAssignName.co_usuario] || []\r\n          acumulador[valorActual.co_usuario].push(valorActualAssignName); \r\n          \r\n          return acumulador;\r\n\r\n        }, Object.create(null));\r\n        let ObjectBar = []\r\n        for (let key in organizedData)\r\n        {\r\n          let earningsData = [];\r\n\r\n          moment.months().map((month) => {\r\n\r\n            let busqueda = organizedData[key].find((index) => {\r\n              return month == moment(index.month).format('MMMM')\r\n            })\r\n\r\n            if(busqueda != undefined){\r\n              earningsData.push(this.numFormat(busqueda.total_net_earnings))\r\n            }\r\n            else{\r\n              earningsData.push(0)\r\n            }\r\n\r\n          });\r\n\r\n          let dataPrepare = {\r\n            name: organizedData[key][0].name,\r\n            data: earningsData\r\n          }\r\n          ObjectBar.push(dataPrepare)\r\n        }\r\n        \r\n        this.dataGraph = ObjectBar\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    numFormat(item) {\r\n      return new Intl.NumberFormat('de-DE').format(item.toFixed(2));\r\n    },\r\n },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\ntspan{\r\n    text-transform: capitalize !important;\r\n  }\r\n</style>"]},"metadata":{},"sourceType":"module"}